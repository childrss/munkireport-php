<?php
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Capsule\Manager as Capsule;

class Jamf extends Migration
{
    private $tableName = 'jamf';
    
    public function up()
    {
        $capsule = new Capsule();
        $capsule::schema()->create($this->tableName, function (Blueprint $table) {
            $table->increments('id');
            $table->string('serial_number')->unique();
            $table->integer('jamf_id');
            $table->string('name')->nullable();
            $table->string('mac_address')->nullable();
            $table->string('alt_mac_address')->nullable();
            $table->string('ip_address')->nullable();
            $table->string('last_reported_ip')->nullable();
            $table->string('jamf_version')->nullable();
            $table->text('barcode_1')->nullable();
            $table->text('barcode_2')->nullable();
            $table->text('asset_tag')->nullable();
            $table->boolean('managed')->nullable();
            $table->string('management_username')->nullable();
            $table->text('management_password_sha256')->nullable();
            $table->boolean('mdm_capable')->nullable();
            $table->string('mdm_capable_users')->nullable();
            $table->boolean('enrolled_via_dep')->nullable();
            $table->boolean('user_approved_enrollment')->nullable();
            $table->boolean('user_approved_mdm')->nullable();
            $table->bigInteger('report_date_epoch')->nullable();
            $table->bigInteger('last_contact_time_epoch')->nullable();
            $table->bigInteger('initial_entry_date_epoch')->nullable();
            $table->bigInteger('last_cloud_backup_date_epoch')->nullable();
            $table->bigInteger('last_enrolled_date_epoch')->nullable();
            $table->string('distribution_point')->nullable();
            $table->string('sus')->nullable();
            $table->string('netboot_server')->nullable();
            $table->integer('site_id')->nullable();
            $table->string('site_name')->nullable();
            $table->string('udid')->nullable();
            $table->boolean('disable_automatic_login')->nullable();
            $table->boolean('itunes_store_account_is_active')->nullable();
            $table->string('username')->nullable();
            $table->text('realname')->nullable();
            $table->string('email_address')->nullable();
            $table->text('position')->nullable();
            $table->string('phone')->nullable();
            $table->text('department')->nullable();
            $table->text('building')->nullable();
            $table->string('room')->nullable();
            $table->boolean('is_purchased')->nullable();
            $table->boolean('is_leased')->nullable();
            $table->string('po_number')->nullable();
            $table->string('vendor')->nullable();
            $table->string('applecare_id')->nullable();
            $table->string('purchase_price')->nullable();
            $table->string('purchasing_account')->nullable();
            $table->bigInteger('po_date_epoch')->nullable();
            $table->bigInteger('warranty_expires_epoch')->nullable();
            $table->bigInteger('lease_expires_epoch')->nullable();
            $table->integer('life_expectancy')->nullable();
            $table->integer('comands_completed')->nullable();
            $table->integer('comands_pending')->nullable();
            $table->integer('comands_failed')->nullable();
            $table->string('purchasing_contact')->nullable();
            $table->boolean('ble_capable')->nullable();
            $table->string('active_directory_status')->nullable();
            $table->integer('available_ram_slots')->nullable();
            $table->integer('battery_capacity')->nullable();
            $table->string('boot_rom')->nullable();
            $table->integer('bus_speed')->nullable();
            $table->integer('cache_size')->nullable();
            $table->string('disk_encryption_configuration')->nullable();
            $table->text('filevault_2_users')->nullable();
            $table->text('gatekeeper_status')->nullable();
            $table->string('institutional_recovery_key')->nullable();
            $table->boolean('master_password_set')->nullable();
            $table->string('model')->nullable();
            $table->string('model_identifier')->nullable();
            $table->string('nic_speed')->nullable();
            $table->integer('number_cores')->nullable();
            $table->integer('number_processors')->nullable();
            $table->string('optical_drive')->nullable();
            $table->string('os_build')->nullable();
            $table->string('os_version')->nullable();
            $table->string('processor_architecture')->nullable();
            $table->integer('processor_speed')->nullable();
            $table->string('processor_type')->nullable();
            $table->string('sip_status')->nullable();
            $table->string('smc_version')->nullable();
            $table->integer('total_ram')->nullable();
            $table->string('xprotect_version')->nullable();
            $table->text('unix_executables')->nullable();
            $table->text('licensed_software')->nullable();
            $table->text('installed_by_casper')->nullable();
            $table->text('installed_by_installer_swu')->nullable();
            $table->text('cached_by_casper')->nullable();
            $table->text('available_software_updates')->nullable();
            $table->text('running_services')->nullable();
            $table->text('computer_group_memberships')->nullable();
            $table->longText('certificates')->nullable();
            $table->longText('attachments')->nullable();
            $table->longText('storage')->nullable();
            $table->longText('applications')->nullable();
            $table->longText('mapped_printers')->nullable();
            $table->longText('computer_usage_logs_history')->nullable();
            $table->longText('audits_history')->nullable();
            $table->longText('policy_logs_history')->nullable();
            $table->longText('casper_remote_logs_history')->nullable();
            $table->longText('screen_sharing_logs_history')->nullable();
            $table->longText('casper_imaging_logs_history')->nullable();
            $table->longText('commands_history')->nullable();
            $table->longText('user_location_history')->nullable();
            $table->longText('mac_app_store_applications_history')->nullable();
            $table->longText('policies_management')->nullable();
            $table->longText('ebooks_management')->nullable();
            $table->longText('mac_app_store_apps_management')->nullable();
            $table->longText('managed_preference_profiles_management')->nullable();
            $table->longText('restricted_software_management')->nullable();
            $table->longText('smart_groups_management')->nullable();
            $table->longText('static_groups_management')->nullable();
            $table->longText('patch_reporting_software_titles_management')->nullable();
            $table->longText('patch_policies_management')->nullable();
            $table->longText('extension_attributes')->nullable();
            $table->longText('local_accounts')->nullable();
            $table->longText('user_inventories')->nullable();
            $table->longText('configuration_profiles')->nullable();
            $table->longText('peripherals')->nullable();
        });
        
        // Make the indexes
        $capsule::schema()->table($this->tableName, function (Blueprint $table) {
            $table->index('id');
            $table->index('serial_number');
            $table->index('jamf_id');
            $table->index('name');
            $table->index('mac_address');
            $table->index('alt_mac_address');
            $table->index('ip_address');
            $table->index('last_reported_ip');
            $table->index('jamf_version');
            $table->index('managed');
            $table->index('management_username');
            $table->index('mdm_capable');
            $table->index('mdm_capable_users');
            $table->index('enrolled_via_dep');
            $table->index('user_approved_enrollment');
            $table->index('user_approved_mdm');
            $table->index('report_date_epoch');
            $table->index('last_contact_time_epoch');
            $table->index('initial_entry_date_epoch');
            $table->index('last_cloud_backup_date_epoch');
            $table->index('last_enrolled_date_epoch');
            $table->index('distribution_point');
            $table->index('site_id');
            $table->index('site_name');
            $table->index('udid');
            $table->index('itunes_store_account_is_active');
            $table->index('username');
            $table->index('email_address');
            $table->index('phone');
            $table->index('room');
            $table->index('is_purchased');
            $table->index('is_leased');
            $table->index('po_number');
            $table->index('vendor');
            $table->index('applecare_id');
            $table->index('purchase_price');
            $table->index('purchasing_account');
            $table->index('po_date_epoch');
            $table->index('warranty_expires_epoch');
            $table->index('lease_expires_epoch');
            $table->index('life_expectancy');
            $table->index('comands_completed');
            $table->index('comands_pending');
            $table->index('comands_failed');
            $table->index('purchasing_contact');
            $table->index('ble_capable');
            $table->index('active_directory_status');
            $table->index('available_ram_slots');
            $table->index('battery_capacity');
            $table->index('boot_rom');
            $table->index('bus_speed');
            $table->index('cache_size');
            $table->index('disk_encryption_configuration');
            $table->index('institutional_recovery_key');
            $table->index('master_password_set');
            $table->index('model');
            $table->index('model_identifier');
            $table->index('nic_speed');
            $table->index('number_cores');
            $table->index('number_processors');
            $table->index('optical_drive');
        });
    }
    
    public function down()
    {
        $capsule = new Capsule();
        $capsule::schema()->dropIfExists($this->tableName);
    }
}
